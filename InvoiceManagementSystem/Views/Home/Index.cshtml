@model InvoiceManagementSystem.Models.Entities.LoginViewModel

<h2>Login</h2>

@if (ViewBag.ShowError == true)
{
    <div class="text-danger">Invalid login attempt.</div>
}

<select class="form-select" aria-label="Default select example" id="loginTypeSelect" onchange="toggleLoginForm()">
    <option selected value="">Giriş şeklini seç</option>
    <option value="admin">Admin/Yönetici</option>
    <option value="user">Kullanıcı</option>
</select>

<!-- Admin Login Formu -->
<form asp-action="AdminLogin" method="post" class="login-form" id="adminLoginForm" style="display: none;">
    <h3>Admin Login</h3>
    <div class="form-floating mb-3">
        <input asp-for="LoginUser.Email" class="form-control" id="floatingInput" placeholder="name@example.com" />
        <label for="floatingInput">Email address</label>
    </div>
    <div class="form-floating">
        <input asp-for="LoginUser.Password" type="password" class="form-control" id="floatingPassword" placeholder="Password" />
        <label for="floatingPassword">Password</label>
    </div>
    <button type="submit">Login</button>
</form>

<!-- Kullanıcı Login Formu -->
<form asp-action="UserLogin" method="post" class="login-form" id="userLoginForm" style="display: none;">
    @if (!ViewData.ModelState.IsValid)
    {
        <div class="alert alert-danger">
            @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
            {
                <div>@error.ErrorMessage</div>
            }
        </div>
    }
    <div class="form-group">
        <label asp-for="User.FirstName"></label>
        <input asp-for="User.FirstName" class="form-control" />
        <span asp-validation-for="User.FirstName" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="User.LastName"></label>
        <input asp-for="User.LastName" class="form-control" />
        <span asp-validation-for="User.LastName" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="User.Email"></label>
        <input asp-for="User.Email" class="form-control" />
        <span asp-validation-for="User.Email" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="User.Phone"></label>
        <input asp-for="User.Phone" class="form-control" />
    </div>
    <div class="form-group">
        <label asp-for="User.TCNo"></label>
        <input asp-for="User.TCNo" class="form-control" />
        <span asp-validation-for="User.TCNo" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="User.CarsPlate"></label>
        <input asp-for="User.CarsPlate" class="form-control" />
    </div>

    <div class="form-group">
        <label asp-for="User.IsOwner"></label>
        <input asp-for="User.IsOwner" class="form-check-input" type="checkbox" />
        <span>Apartment Owner</span>
    </div>

    <div class="form-group">
        <label asp-for="User.ApartmentId"></label>
        <input asp-for="User.ApartmentId" class="form-control" type="number" />
        <span asp-validation-for="User.ApartmentId" class="text-danger"></span>
    </div>
    <button type="submit">Login</button>
</form>


<script>
    function toggleLoginForm() {
        const selectedType = document.getElementById("loginTypeSelect").value;
        const adminForm = document.getElementById("adminLoginForm");
        const userForm = document.getElementById("userLoginForm");

        // Seçime göre formları göster/gizle
        if (selectedType === "admin") {
            adminForm.style.display = "block";
            userForm.style.display = "none";
        } else if (selectedType === "user") {
            adminForm.style.display = "none";
            userForm.style.display = "block";
        } else {
            adminForm.style.display = "none";
            userForm.style.display = "none";
        }
    }
</script>

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js"></script>
}